# UAM Relay - Environment Configuration
# Copy this file to .env and edit the values for your deployment.
#
# Usage: cp .env.example .env && $EDITOR .env

# ============================================================================
# Core Settings
# ============================================================================

# Your relay's public domain name
UAM_RELAY_DOMAIN=youam.network

# Full public HTTP URL (used for .well-known and federation endpoint)
UAM_RELAY_HTTP_URL=https://relay.youam.network

# Full public WebSocket URL (advertised to agents)
UAM_RELAY_WS_URL=wss://relay.youam.network/ws

# Path to SQLite database file (inside the container, use a volume)
UAM_DB_PATH=/app/data/relay.db

# Network interface to bind to (0.0.0.0 for all interfaces)
UAM_HOST=0.0.0.0

# Port the relay listens on
UAM_PORT=8000

# Allowed CORS origins (comma-separated, or * for all)
UAM_CORS_ORIGINS=*

# ============================================================================
# Security Settings
# ============================================================================

# Admin API key -- enables admin endpoints when set
# Generate a strong random string: openssl rand -hex 32
UAM_ADMIN_API_KEY=

# Domain verification TTL in hours (how long before re-verification)
UAM_DOMAIN_VERIFICATION_TTL_HOURS=24

# ============================================================================
# Spam Defense Settings
# ============================================================================

# Max messages per minute from any single domain
UAM_DOMAIN_RATE_LIMIT=200

# Starting reputation score for new Tier 1 agents (0-100)
UAM_REPUTATION_DEFAULT_SCORE=30

# Reputation score for DNS-verified agents (0-100)
UAM_REPUTATION_DNS_VERIFIED_SCORE=60

# ============================================================================
# Webhook Settings
# ============================================================================

# Circuit breaker cooldown in seconds (after 5 consecutive failures)
UAM_WEBHOOK_CIRCUIT_COOLDOWN_SECONDS=3600

# HTTP timeout for webhook delivery (seconds)
UAM_WEBHOOK_DELIVERY_TIMEOUT=30.0

# ============================================================================
# Federation Settings
# ============================================================================

# Path to relay Ed25519 signing key (auto-generated if missing)
UAM_RELAY_KEY_PATH=/app/data/relay_key.pem

# Enable/disable federation (true/false)
UAM_FEDERATION_ENABLED=true

# Maximum relay hops for federated messages
UAM_FEDERATION_MAX_HOPS=3

# Default rate limit for federated messages per source relay (msg/min)
UAM_FEDERATION_RELAY_RATE_LIMIT=1000

# Maximum age of federation request timestamps (seconds, for replay prevention)
UAM_FEDERATION_TIMESTAMP_MAX_AGE=300

# TTL for cached relay discovery results (hours)
UAM_FEDERATION_DISCOVERY_TTL_HOURS=1

# ============================================================================
# Debug Settings
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
UAM_LOG_LEVEL=INFO

# Debug mode: sets all uam.* loggers to DEBUG (do NOT use in production)
# UAM_DEBUG=false
